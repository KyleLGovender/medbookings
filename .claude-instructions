# Claude Code Instructions

### Core Principles

**ALWAYS:**
- Think hardest - use maximum cognitive effort for technical analysis
- Ask questions when confidence is below 95%
- Prefer editing existing code over creating new
- Require explicit user confirmation before marking any task complete

**NEVER:**
- Add legacy fallback code (unless explicitly requested)
- Implement when uncertain - clarify first
- Create new code when existing code can be modified
- Mark tasks complete without user satisfaction confirmation

### File Operations

**ALWAYS:**
- Check if file exists before writing
- Offer Overwrite/Rename/Cancel options for conflicts
- Get explicit user approval for overwrites

**NEVER:**
- Silently overwrite files without user confirmation
- Assume file doesn't exist - check first
- Delete or move files without user consent

### Build & Quality

**ALWAYS:**
- Run build verification before marking tasks complete
- Fix build errors systematically
- Run syntax validation after each modification
- Use `grep -n` or `rg` to find all instances of modified functions/variables
- Execute `npx tsc --noEmit` after TypeScript changes
- Review adjacent files that import modified modules
- Ensure each code block compiles before proceeding

**NEVER:**
- Mark tasks complete with failing builds
- Use trial-and-error to fix compilation errors
- Proceed to next phase with build failures

### Workflow Order

**ALWAYS:**
- Start with technical planning as mandatory entry point
- Follow sequence: Technical Plan → Requirements → Implementation
- Complete each phase before moving to next

**NEVER:**
- Jump ahead in the workflow sequence
- Start implementation without approved technical plan

### Context Awareness

**ALWAYS:**
- Read core architecture files first (layout.tsx, schema.prisma, root.ts)
- Read entire feature folders before modifications
- Understand existing patterns before implementing

**NEVER:**
- Modify files without reading them completely first
- Assume patterns without checking existing implementations
- Make partial edits without checking FULL file and function scope
- Assume variable names without verifying declarations
- Modify interfaces without checking all implementations
- Skip context loading even if familiar with codebase
